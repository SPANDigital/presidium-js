language: node_js
node_js:
- '16'
cache:
  directories:
  - node_modules
jobs:
  include:
  - stage: Tag Develop
    if: branch IN (develop, master) AND type = push
    git:
      depth: false
    services:
    - docker
    script:
    - "./build/tag_code.sh"
  - stage: Bundle JS
    if: tag IS present
    language: node_js
    install:
    - npm install
    script:
    - npm run build
    - "./build/github_release.sh"
    deploy:
    - provider: s3
      access_key_id: AKIA2WMSJGXU3J5T27XB
      secret_access_key:
        secure: MWxsVyCwNb9/A+mMI3/5Fcgs/HnCisQ1tPXqoXYNiJnlOgQUzd3vbcOFTLm2zu4jKCgspctIv9/zuGPfU/Cgnj3x8mYk3CyKfsaWZ6Dq4DGXHLmxPjpyhheZoN609utnW56otv8pMNpFMsljlZ2nWjET4wNnD0TpxILY0cqvixVCv0Hv0MmjwWx+DMz4NHlKBApp3z7AE7fo052sdN+Z0PNOfJCQfpNlhg1M6b+9g+bDN0jYuLjBNSUw0p3UmBtitYJ8c/RiOrAgsKL6PG6A+8WF+XV/enapDaWL+wcFIrSfIlHMlZ+a5u5Em+DN8FbJfXDqiLBjhBh6yySO7WxzY1oQpyDVkwLFheQ5QjDjMmkwxFTK6cq12sAnwrp7vngadWKgt62Tstm1w2vczEDl7TZUqhrLw8AzVqEw5j5l+ZM+liOeXomYrzYVz/2oh3BunKTfA9mJ8meP1Zvb42PDxQAABHVOI5qArlIAdYLxhdBDONHTtXTU9FMGkn1qplQuEJavJdxrQf1tmiFhCZJiRDlLxMNAuOiuqbGBpm2XqG77L7LRxxIBns5dAcOLSprUVTVE/0r5v6nNSwTPx4TJ9GMOR4EaBVpLX0zR7iPg9BDSLZN7ho7cpRTeCix+NXBugm8UPZAP+N4sS7h6tFq6zZY/q4fkCtoJJGfahWPKNP8=
      bucket: span-presidium
      local-dir: dist
      upload-dir: presidium-js/$TRAVIS_TAG
      skip_cleanup: 'true'
      on:
        tags: true
env:
  global:
  - REPO=spandigital/presidium-js
  - secure: rh39r+8WH3PvJCF5Ps+0a+GieIE5nPsfiylxXOhqMT3qrjpT1MGMMivcEJj+p+mW+UBH/SuCWzqZy51g+gF06G8SP+82T3yljGzbXjhilkPB2fXMZUNP6QlDzgGWH+vHbRp9Zqx780PQ1sld3tJKpMnWJ05CK6d/CLCSjmaRugApQ/0KfjkKqFiY+8BlnN767MHY3zfwj4Np0HLSJzV0zr1syEB75k+rY475GjuTJASXsuJ4zuslTMxUZSmiv93mO7KWKVe2DwsS/HY2RVlmOJnBPFvf/+2BCQdRViEKyt+VOOLgrgCSmILb5WZYdKKvhnoJlPol14aibNCneUI+ChIIcwh5mrU/OzVy9XVreXBgyqH8+dPtyvZ31GgosAOlxmegrcjmp46yez8TzqMGI25CsBdX6ArmppJy8K0AEeWImdMDElE3H4PyJT2ksbrLs6SvUdwOcz/jAY9fCDbUpadg7M0+2y4wJ34aghoJx0Y9OY822Y1NpN45s/7bP87g/WR1Yna+57cCvJS7O2VVK/ZAQU/n/7BCiB7o0PKqXtJJZPEV440B0a0uOR1nZABqQxor4pXsB11A8ASW/WPcb5VqzJibjZ56/pcNQU23Q5Rgg0kPy3VDfDpKnpURhfeybZnHUWZVdEdInuLGXa2pYhEQMRvM9NW9enlVlZoqoqA=

  
